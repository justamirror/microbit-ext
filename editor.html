  
<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="style.css">
    <meta charset="UTF-8">
    <title>Microbit.js testing environment</title>
</head>

<body>
	<a href='/'><h1 style='float: left;width:33vw;margin-left:2vw;color:white;text-decoration:none'>Microbit.js</h1></a>
	<button style='float:left;margin-top:2.5vh;height:5vh;width:30vw;background:green;font-weight;border-color:#44bb58;font-family:monospace;' id='run'>R U N</button><div style='float:right;margin-top:3.5vh;margin-right:2vw;'>TIP: log() to log values.</div>
	<div id='editor' style='height: 90vh;width:50vw;position:absolute;bottom:0'>micro = microbit.new()</div>
	<div id='output' style='height: 90vh;width:50vw;position:absolute;bottom:0;right:0;background:black'></div>
	<iframe style='display:none' src='sandbox.html' sandbox='allow-scripts' id='sandbox'>
</body>

<script src="https://pagecdn.io/lib/ace/1.7.1/ace.js" type='text/javascript'></script>
 
<script>
	var editor = ace.edit("editor");
	editor.setTheme("ace/theme/monokai");
	editor.session.setMode("ace/mode/javascript");
	editor.session.setValue(localStorage['code'] || 'micro = microbit.new()')
	window.addEventListener("message", function(event) {
		function conv(args) {
			let r = ''
			args.forEach((e)=>{
				if (typeof e === 'object') {
					r+=JSON.stringify(e)
				} else {
					r+=e.toString()
				}
				r+=' '
			})
			return r.slice(0, -1)
		}
		document.getElementById('output').innerText+=conv(args)+'\n'
	}
	document.getElementById('run').onclick = ()=>{
		document.getElementById('output').innerText=''
		document.getElementById('sandbox').postMessage(editor.getValue())
	}

	window.onunload = function() {
		localStorage['code'] = editor.getValue()
	}
</script>

</html>
